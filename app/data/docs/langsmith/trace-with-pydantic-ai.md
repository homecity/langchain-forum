---
title: "Trace with PydanticAI"
url: "https://docs.langchain.com/langsmith/trace-with-pydantic-ai"
section: "langsmith"
last_modified: "2025-12-16T22:07:25.013Z"
---
LangSmith can capture traces generated by PydanticAI using its built-in OpenTelemetry instrumentation. This guide shows you how to automatically capture traces from your PydanticAI agents and send them to LangSmith for monitoring and analysis.

## 

[​

](#installation)

Installation

Install the required packages:

pip

uv

Copy

```
pip install langsmith pydantic-ai opentelemetry-exporter-otlp
```

Requires LangSmith Python SDK version `langsmith>=0.4.26` for optimal OpenTelemetry support.

## 

[​

](#setup)

Setup

### 

[​

](#1-configure-environment-variables)

1\. Configure environment variables

Set your [API keys](/langsmith/create-account-api-key) and project name:

Copy

```
export LANGSMITH_API_KEY=<your_langsmith_api_key>
export LANGSMITH_PROJECT=<your_project_name>
export OPENAI_API_KEY=<your_openai_api_key>
```

### 

[​

](#2-configure-opentelemetry-integration)

2\. Configure OpenTelemetry integration

In your PydanticAI application, configure the LangSmith OpenTelemetry integration:

Copy

```
from langsmith.integrations.otel import configure
from pydantic_ai import Agent

# Configure LangSmith tracing
configure(project_name="pydantic-ai-demo")

# Instrument all PydanticAI agents
Agent.instrument_all()
```

You do not need to set any OpenTelemetry environment variables or configure exporters manually—`configure()` handles everything automatically.

### 

[​

](#3-create-and-run-your-pydanticai-agent)

3\. Create and run your PydanticAI agent

Once configured, your PydanticAI agents will automatically send traces to LangSmith:

Copy

```
from langsmith.integrations.otel import configure
from pydantic_ai import Agent

# Configure LangSmith tracing
configure(project_name="pydantic-ai-demo")

# Instrument all PydanticAI agents
Agent.instrument_all()

# Create and run an agent
agent = Agent('openai:gpt-4o')
result = agent.run_sync('What is the capital of France?')
print(result.output)
#> Paris
```

## 

[​

](#advanced-usage)

Advanced usage

### 

[​

](#custom-metadata-and-tags)

Custom metadata and tags

You can add custom metadata to your traces using OpenTelemetry span attributes:

Copy

```
from opentelemetry import trace
from pydantic_ai import Agent
from langsmith.integrations.otel import configure

configure(project_name="pydantic-ai-metadata")
Agent.instrument_all()

tracer = trace.get_tracer(__name__)

agent = Agent('openai:gpt-4o')

with tracer.start_as_current_span("pydantic_ai_workflow") as span:
    span.set_attribute("langsmith.metadata.user_id", "user_123")
    span.set_attribute("langsmith.metadata.workflow_type", "question_answering")
    span.set_attribute("langsmith.span.tags", "pydantic-ai,production")

    result = agent.run_sync('Explain quantum computing in simple terms')
    print(result.output)
```

### 

[​

](#combine-with-other-instrumentors)

Combine with other instrumentors

You can combine PydanticAI instrumentation with other OpenTelemetry instrumentors:

Copy

```
from langsmith.integrations.otel import configure
from pydantic_ai import Agent
from openinference.instrumentation.openai import OpenAIInstrumentor

# Configure LangSmith tracing
configure(project_name="multi-framework-app")

# Initialize multiple instrumentors
Agent.instrument_all()
OpenAIInstrumentor().instrument()

# Your application code using multiple frameworks
```

* * *

[Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/trace-with-pydantic-ai.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).

[Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.